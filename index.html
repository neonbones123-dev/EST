const apiKey = "";

async function generateWarehouseImage() {
  const prompt = "A professional, high-quality photograph of a modern industrial warehouse with high ceilings, organized storage racks, and clean concrete floors, realistic lighting, 4k resolution";
  
  try {
    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        instances: [{ prompt: prompt }],
        parameters: { sampleCount: 1 }
      }),
    });

    const result = await response.json();
    
    if (result.predictions && result.predictions[0]) {
      const imageUrl = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
      
      // Создаем элемент изображения для отображения
      const img = document.createElement('img');
      img.src = imageUrl;
      img.alt = "Modern Warehouse";
      img.style.maxWidth = "100%";
      img.style.borderRadius = "8px";
      img.style.boxShadow = "0 4px 6px rgba(0,0,0,0.1)";
      
      // Кнопка для скачивания
      const downloadBtn = document.createElement('a');
      downloadBtn.href = imageUrl;
      downloadBtn.download = "warehouse.jpg";
      downloadBtn.innerText = "Скачать изображение (warehouse.jpg)";
      downloadBtn.className = "download-btn";
      downloadBtn.style.display = "block";
      downloadBtn.style.marginTop = "20px";
      downloadBtn.style.padding = "10px 20px";
      downloadBtn.style.backgroundColor = "#2563eb";
      downloadBtn.style.color = "white";
      downloadBtn.style.textDecoration = "none";
      downloadBtn.style.borderRadius = "5px";
      downloadBtn.style.textAlign = "center";

      const container = document.getElementById('image-container');
      container.innerHTML = '';
      container.appendChild(img);
      container.appendChild(downloadBtn);
    }
  } catch (error) {
    console.error("Ошибка при генерации:", error);
    document.getElementById('image-container').innerText = "Не удалось сгенерировать изображение. Попробуйте еще раз.";
  }
}

// Запуск при загрузке
window.onload = generateWarehouseImage;
